___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "CLIENT",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "GA4 for Product Analytics",
  "brand": {
    "id": "brand_dummy",
    "displayName": "Anmize Digital",
    "thumbnail": "data:image/jpeg;base64,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\u003d\u003d"
  },
  "description": "A GDPR compliant GA4 client for product analytics. \n\nOptionally you can send a custom parameter to sGTM to use it as sid \u0026 cid. Otherwise client will add the default value as sid \u0026 cid. Read doc...",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[]


___SANDBOXED_JS_FOR_SERVER___

const claimRequest = require('claimRequest');
const extractEventsFromMpv2 = require('extractEventsFromMpv2');
const getClientName = require('getClientName');
const getRemoteAddress = require('getRemoteAddress');
const getRequestHeader = require('getRequestHeader');
const isRequestMpv2 = require('isRequestMpv2');
const returnResponse = require('returnResponse');
const runContainer = require('runContainer');
const setPixelResponse = require('setPixelResponse');

const log = require('logToConsole');

if (isRequestMpv2()) {
  claimRequest();
  const events = extractEventsFromMpv2();
 
  for (let i = 0; i < events.length; ++i) {
    const event = events[i];
    
    // Get User-Agent and IP from incoming request
    const ua = getRequestHeader('user-agent');
    const ip = '1.2.3.4';
    
    const anmize_id = event.anmize_id;
    
        if(!event.ip_override && ip) event.ip_override = ip;
        if(!event.user_agent && ua) event.user_agent = ua;
    
        if(event.anmize_id)  {
            event.client_id = anmize_id;
            event.ga_session_id = anmize_id;
            event.ga_session_number = '1';
          } 
        else {
            event.client_id = '1010101010.1010101010';
            event.ga_session_id = '1010101010.1010101010';
            event.ga_session_number = '1';
          }      
      
        setPixelResponse();
        runContainer(event, () => returnResponse());
    
  }
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "return_response",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_response",
        "versionId": "1"
      },
      "param": [
        {
          "key": "writeResponseAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "writeHeaderAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "run_container",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Untitled test 1
  code: |-
    const mockData = {
      // Mocked field values
    };

    // Call runCode to run the template's code.
    runCode(mockData);


___NOTES___

Created on 13/05/2022, 18:44:40


